specVersion: 0.0.4
features:
  - nonFatalErrors
schema:
  file: ./schema.graphql
dataSources:
  - name: OrderFactory
    kind: ethereum/contract
    network: gnosis
    source:
      address: "0x40CF89E715F1fA37799fC3a17681a4C6a7bdfdd0"
      startBlock: 26488660
      abi: OrderFactory
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.6
      language: wasm/assemblyscript
      file: ./src/mappings/factory.ts
      entities:
        - OrderFactory
      abis:
        - name: OrderFactory
          file: ./abis/OrderFactory.json
      eventHandlers:
        - event: OrderCreated(indexed address)
          handler: handleDCAOrderCreated
templates:
  - name: DCAOrder
    kind: ethereum/contract
    network: gnosis
    source:
      abi: DCAOrder
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.6
      language: wasm/assemblyscript
      file: ./src/mappings/order.ts
      entities:
        - Order
        - Token
      abis:
        - name: DCAOrder
          file: ./abis/DCAOrder.json
        - name: ERC20
          file: ./abis/ERC20.json
      eventHandlers:
        - event: Initialized(indexed address)
          handler: handleDCAOrderInitialized
        - event: Cancelled(indexed address)
          handler: handleDCAOrderCancelled
